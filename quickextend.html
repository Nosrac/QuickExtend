<html>

<head>
	<script src="main.js" type="text/javascript"></script>
	<script>
	var settingsURL = (function()
	{
		var parts = document.URL.split('/');
		parts.pop();
		parts.push('settings.html');

		return parts.join('/');
	})();
	var openURL = function(url)
	{
		if (typeof(safari) !== 'undefined')
		{
			safari.application.activeBrowserWindow.openTab().url = url;
		}
	}
	safari.extension.settings.addEventListener("change", function(event)
	{
		if (event.key == "editExtensions")
		{
			openURL( settingsURL );
		}
	}, false);
	</script>
</head>
<body>
Yay
</body>
</html>